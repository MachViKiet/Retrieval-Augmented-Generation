/* eslint-disable no-unused-vars */
/* eslint-disable no-console */

const users = [
  // {
  //   'name': 'Mạch Vĩ Kiệt',
  //   'email': 'mvkiet21@clc.fitus.edu.vn'
  // },
  // {
  //   'name': 'Nguyen Vu Minh Khoi',
  //   'email': 'nvmkhoi21@clc.fitus.edu.vn'
  // },
  {
    'name': 'Nguyen Duy Dang Khoa',
    'email': '21127078@student.hcmus.edu.vn'
  },
  {
    'name': 'Dang Khoa',
    'email': 'khoanguyenduydang1980@gmail.com'
  },
  {
    'name': 'Nguyễn Duy Hoàng Phúc',
    'email': 'nguyenduyhoangp@gmail.com'
  },
  {
    'name': 'Trần Thị Như Tiên',
    'email': 'tientran.170875@gmail.com'
  },
  {
    'name': 'Nguyễn Ngọc Hoàng Anh',
    'email': 'anhnguyenngochoang2003@gmail.com'
  },
  // {
  //   'name': 'Phạm Gia Kiệt',
  //   'email': 'phamgiakietk14@siu.edu.vn'
  // },
  {
    'name': 'Linh Xe Ôm',
    'email': 'ngphuc0413@gmail.com'
  },
  {
    'name': 'Nguyễn Xuân Hoàng',
    'email': '21200009@student.hcmus.edu.vn'
  },
  {
    'name': 'Nguyễn Xuân Hoàng',
    'email': 'xuanhoangnguyen1604@gmail.com'
  },
  {
    'name': 'Nguyen Dinh Phap',
    'email': 'phap1788@gmail.com'
  },
  // {
  //   'name': 'Nguyễn Thành Chí Tâm',
  //   'email': 'nguyenthanhchitam@gmail.com'
  // },
  // {
  //   'name': 'Nguyễn Hoàng Minh',
  //   'email': 'minh.nguyen28122000@gmail.com'
  // },
  {
    'name': 'su thanh long',
    'email': 'long.sustlong2003@hcmut.edu.vn'
  },
  {
    'name': 'abcxyz',
    'email': 'kirigayakazuto5453@gmail.com'
  },
  // {
  //   'name': 'Lê Đình Thành Đạt',
  //   'email': 'thanhdatledinh1510@gmail.com'
  // },
  // {
  //   'name': 'Ngọc Bích',
  //   'email': 'ngocbich9926@gmail.com'
  // },
  // {
  //   'name': 'Đặng Nhật Hòa',
  //   'email': 'dangnhathoa22@gmail.com'
  // },
  // {
  //   'name': 'JohnNaeder',
  //   'email': 'machtienduy3@gmail.com'
  // },
  // {
  //   'name': 'Thang Huynh Duc',
  //   'email': 'ct07n0149@actvn.edu.vn'
  // },
  {
    'name': 'nguyễn văn a',
    'email': 'tranhieukrb2004@gmail.com'
  },
  {
    'name': 'lyminhluan21',
    'email': 'testredfinger21071@gmail.com'
  },
  // {
  //   'name': 'Nhat Minh',
  //   'email': 'corneropeace@gmail.com'
  // },
  // {
  //   'name': 'Lê Xuân Kiên',
  //   'email': 'lexuankien122@gmail.com'
  // },
  {
    'name': 'Nghĩa Lê',
    'email': 'nltnghia21@gmail.com'
  },
  // {
  //   'name': 'Nguyễn Ngọc Vũ',
  //   'email': 'nnvu21@clc.fitus.edu.vn'
  // },
  {
    'name': 'Tran Thuan Phat',
    'email': '21127666@student.hcmus.edu.vn'
  },
  {
    'name': 'Trần Minh Quang',
    'email': '21127407@student.hcmus.edu.vn'
  },
  {
    'name': 'ducanh',
    'email': 'maitranducanh6789@gmail.com'
  },
  {
    'name': 'Hi Hi Vih',
    'email': 'bqvinh21@clc.fitus.edu.vn'
  },
  // {
  //   'name': 'Nlhp',
  //   'email': 'nguyenlehoaiphuc36@gmail.com'
  // },
  // {
  //   'name': 'Nguyen Ngoc Minh Chau',
  //   'email': 'chauhocbai@gmail.com'
  // },
  {
    'name': 'Ng Van A',
    'email': 'freedomtohongkong@gmail.com'
  },
  {
    'name': 'Võ Quốc Quang',
    'email': '22120299@student.hcmus.edu.vn'
  },
  // {
  //   'name': 'Lê Hữu Minh Quang',
  //   'email': 'lhmquang231@clc.fitus.edu.vn'
  // },
  // {
  //   'name': 'Vũ Ngọc Minh Quang',
  //   'email': 'quangvu270405@gmail.com'
  // },
  {
    'name': 'Vũ Ngọc Minh Quang',
    'email': 'justanoob274@gmail.com'
  },
  // {
  //   'name': 'MyTest',
  //   'email': 'mahhentoi@gmail.com'
  // },
  {
    'name': 'wendy',
    'email': 'doluly2115@gmail.com'
  },
  // {
  //   'name': 'Nguyễn Thành Huy',
  //   'email': 'hn4409906@gmail.com'
  // },
  {
    'name': 'Yiting',
    'email': 'yiting2106@gmail.com'
  },
  // {
  //   'name': 'Hà Muôn',
  //   'email': 'muon.ha.spbleti@gmail.com'
  // },
  // {
  //   'name': 'vgg',
  //   'email': 'dghah595@gmail.com'
  // },
  {
    'name': 'Phạm Anh Quân',
    'email': 'quanpham2112004@gmail.com'
  },
  {
    'name': 'Trâm',
    'email': 'ncham413@gmail.com'
  },
  {
    'name': 'ThanhTai',
    'email': 'thanhtai0175@gmail.com'
  },
  {
    'name': 'Trọng Nguyễn',
    'email': 'trongcdmt@gmail.com'
  },
  // {
  //   'name': 'tien1801',
  //   'email': 'tienlec12@gmail.com'
  // },
  {
    'name': 'kinh',
    'email': 'kinh30072004k@gmail.com'
  },
  {
    'name': 'A',
    'email': 'thaihuy15a2@gmail.com'
  },
  {
    'name': 'Tèo',
    'email': 'uncle92306@gmail.com'
  },
  {
    'name': 'Nguyễn Trọng Hiếu',
    'email': 'hieumaric@gmail.com'
  },
  // {
  //   'name': 'Bảo thiên',
  //   'email': 'tranbam785@gmail.com'
  // },
  {
    'name': 'anhatdeptrai',
    'email': 'vohuuhoangnhat9@gmail.com'
  },
  // {
  //   'name': 'Deptraiso1vn',
  //   'email': 'kienthucfanpage@gmail.com'
  // },
  {
    'name': 'Trịnh Văn Tiến',
    'email': 'trinhtien02122003@gmail.com'
  },
  {
    'name': 'abc',
    'email': 'phamnhatminhtn@gmail.com'
  },
  {
    'name': '123123',
    'email': 'khoatdk007@gmail.com'
  },
  {
    'name': 'PeterPain',
    'email': 'phghuy0101@gmail.com'
  },
  {
    'name': 'aassiimmaa',
    'email': 'nguyenthanhanvp2690@gmail.com'
  },
  {
    'name': 'nguyen van van',
    'email': 'chiminhtran179@gmail.com'
  },
  {
    'name': 'nhansunday',
    'email': 'sbtc.walkingdead@gmail.com'
  },
  {
    'name': 'le thien',
    'email': 'agin0969@gmail.com'
  },
  {
    'name': 'Nguyen Thanh Binh',
    'email': 'thanhbinhcvak5@gmail.com'
  },
  {
    'name': 'Mai Hong Quan',
    'email': 'hongquanmaidz@gmail.com'
  },
  {
    'name': 'Nguyễn Văn Khải',
    'email': 'truongvankhai.haui@gmail.com'
  },
  {
    'name': 'Nameless',
    'email': 'sekirovn@gmail.com'
  },
  // {
  //   'name': 'Ngọc Anh',
  //   'email': 'gggg.2k4@gmail.com'
  // },
  // {
  //   'name': '123',
  //   'email': 'nguyendinhchienvnex@gmail.com'
  // },
  // {
  //   'name': 'Cao Nguyễn Khánh',
  //   'email': 'cnkhanh21@clc.fitus.edu.vn'
  // },
  {
    'name': 'thái viết lập',
    'email': 'lapthai03@gmail.com'
  },
  {
    'name': 'Ngô Tấn Tài',
    'email': 'tantai13102005@gmail.com'
  },
  {
    'name': 'Văn Tùng',
    'email': 'vantung@gmail.com'
  },
  {
    'name': 'Van Ty',
    'email': 'tiennfrozen2004@gmail.com'
  },
  // {
  //   'name': 'Bùi Phi Ân',
  //   'email': 'buiphian2005@gmail.com'
  // },
  {
    'name': 'gogorun235',
    'email': 'gogorun235@gmail.com'
  },
  {
    'name': 'vianhlagio',
    'email': 'thongvandev2307@gmail.com'
  },
  {
    'name': 'Q',
    'email': 'sonbac2527@gmail.com'
  },
  // {
  //   'name': 'Nguyễn Phạm Tuân',
  //   'email': 'tuannguyenpham12@gmail.com'
  // },
  // {
  //   'name': 'cuong',
  //   'email': 'vietcuong.it@gmail.com'
  // },
  {
    'name': 'Phan Đại Vĩ',
    'email': 'phandaivi253.study@gmail.com'
  },
  // {
  //   'name': 'Tú',
  //   'email': 'wimpier-mow-0o@icloud.com'
  // },
  {
    'name': 'Nguyễn Khoa',
    'email': 'nqdkhoa23@clc.fitus.edu.vn'
  },
  {
    'name': 'Tan',
    'email': 'ken1162004@gmail.com'
  },
  {
    'name': 'Nguyễn',
    'email': 'ntduong21@clc.fitus.edu.vn'
  },
  {
    'name': 'Thinh',
    'email': 'tndthinh2419@clc.fitus.edu.vn'
  },
  {
    'name': 'Trần Thị Ngọc Trâm',
    'email': 'tramnp2006@gmail.com'
  },
  // {
  //   'name': 'Hồ Đình Trí',
  //   'email': 'chris@gmail.com'
  // },
  // {
  //   'name': 'Hồ Đình Trí',
  //   'email': 'hodinht2@gmail.com'
  // },
  // {
  //   'name': 'Trương Tấn Dũng',
  //   'email': 'truongtandung1511@gmail.com'
  // },
  {
    'name': 'taitrinh',
    'email': 'tatai22@clc.fitus.edu.vn'
  },
  // {
  //   'name': 'Trương Vủ Phát',
  //   'email': 'tvphat23@clc.fitus.edu.vn'
  // },
  {
    'name': 'Nguyễn Minh Việt',
    'email': 'wadimirluigi11307@gmail.com'
  },
  {
    'name': 'LVT',
    'email': 'longthien2227@gmail.com'
  },
  {
    'name': 'lập',
    'email': 'lap.2274802010473@vanlanguni.vn'
  }
  // {
  //   'name': 'Minh Duy',
  //   'email': 'minhduy291106@gmail.com'
  // }
]

// Hàm delay (nghỉ giữa các lần gửi)
const delay = (ms) => new Promise((resolve) => setTimeout(resolve, ms));

var nodemailer = require('nodemailer')

var transporter = nodemailer.createTransport({
  service: 'gmail',
  auth: {
    user: 'mvkiet21@clc.fitus.edu.vn',
    pass: 'uboy zuwd vpjf cyjl'
  }
})
// const subject = 'Dự án Chatbot FIT-HCMUS - Chia sẻ ý kiến của bạn!'
// var mailOptions = {
//   from: 'UniBot-KHTN (2024) <machkiet2003@gmail.com>',
//   to: 'nddkhoa21@clc.fitus.edu.vn',
//   cc: 'mvkiet21@clc.fitus.edu.vn',
//   subject,
//   html: `<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px;">
//           <h2 style="color: #007BFF;">Cảm ơn bạn, Khoa !</h2>
//           <p>Chúng tôi rất trân trọng sự ủng hộ của bạn đối với <strong>Chatbot tư vấn FIT-HCMUS</strong> này của chúng tôi.</p>
//           <p>Để có thể cải thiện ứng dụng nhiều hơn nữa, chúng mình mong bạn có thể dành ra 5 phút để điền form feedback tại đây:</p>
//           <p style="text-align: center;">
//             <a href="https://docs.google.com/forms/d/e/1FAIpQLSfke0wHIFDm5VcyZUJa9R-ybpvDGcd9xOW-6R9qXr8jtfJnXQ/viewform?edit_requested=true" style="background-color: #007BFF; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Form đánh giá dự án</a>
//           </p>
//           <p>👉 Nếu bạn có bất kỳ câu hỏi nào, hãy liên hệ với chúng tôi qua email <a href="nddkhoa21@clc.fitus.edu.vn">nddkhoa21@clc.fitus.edu.vn</a>.</p>
//           <p>👉 Nếu bạn đã nhận được email và điền form này trước đó, vui lòng bỏ qua email này! Xin chân thành xin lỗi các bạn vì sự bất tiện này!.</p>

//           <p style="text-align: center; color: #777;">Trân trọng,<br/><strong>Đội ngũ dự án Chatbot tư vấn FIT-HCMUS</strong></p>
//         </div>`
// }

// transporter.sendMail(mailOptions, function(error, info) {
//   if (error) {
//     console.log('Gởi Email Thất Bại: ', error)
//   } else {
//     console.log('Gởi Email Thành Công: ' + info.response)
//   }
// })

const sendEmails = async () => {
  try {
    // users.map(async (info, index) => {
    var count = 0
    for (const info of users) {
      count = count + 1
      const subject = 'Dự án Chatbot FIT-HCMUS - Chia sẻ ý kiến của bạn!'
      var mailOptions = {
        from: 'UniBot-KHTN (2024) <machkiet2003@gmail.com>',
        to: info.email,
        subject,
        html: `<div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px;">
              <h2 style="color: #007BFF;">Cảm ơn bạn, ${info.name} !</h2>
              <p>Chúng tôi rất trân trọng sự ủng hộ của bạn đối với <strong>Chatbot tư vấn FIT-HCMUS</strong> này của chúng tôi.</p>
              <p>Để có thể cải thiện ứng dụng nhiều hơn nữa, chúng mình mong bạn có thể dành ra 5 phút để điền form feedback tại đây:</p>
              <p style="text-align: center;">
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSfke0wHIFDm5VcyZUJa9R-ybpvDGcd9xOW-6R9qXr8jtfJnXQ/viewform?edit_requested=true" style="background-color: #007BFF; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px;">Form đánh giá dự án</a>
              </p>
              <p>👉 Nếu bạn có bất kỳ câu hỏi nào, hãy liên hệ với chúng tôi qua email <a href="nddkhoa21@clc.fitus.edu.vn">nddkhoa21@clc.fitus.edu.vn</a>.</p>
              <p>👉 Nếu bạn đã nhận được email và điền form này trước đó, vui lòng bỏ qua email này! Xin chân thành xin lỗi các bạn vì sự bất tiện này!.</p>

              <p style="text-align: center; color: #777;">Trân trọng,<br/><strong>Đội ngũ xây dựng Chatbot tư vấn FIT-HCMUS</strong></p>
            </div>`
      }

      await transporter.sendMail(mailOptions)
      console.log(`✅ ${count + 1} Email gửi đến ${info.email} thành công!`)

      // Nghỉ 5 giây trước khi gửi email tiếp theo
      await delay(4000)

    }

    // Chờ tất cả email được gửi xong
    // await Promise.all(emailPromises)
    console.log('Tất cả email đã được gửi thành công!')
  } catch (error) {
    console.error('Lỗi gửi email:', error)
  }
}

sendEmails()
